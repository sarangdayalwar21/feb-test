FROM  openjdk17:latest
  ADD ./
  COPY .target
  CMD ["java","-jar","app.jar"]



 
 
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
                             http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.example</groupId>
    <artifactId>simple-java-maven-app</artifactId>
    <version>1.0-SNAPSHOT</version>

    <properties>
        <maven.compiler.source>17</maven.compiler.source>
        <maven.compiler.target>17</maven.compiler.target>
    </properties>

    <dependencies>
        <!-- JUnit 5 for testing -->
        <dependency>
            <groupId>org.junit.jupiter</groupId>
            <artifactId>junit-jupiter</artifactId>
            <version>5.10.0</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <!-- Maven Compiler Plugin -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.11.0</version>
                <configuration>
                    <release>21</release>
                </configuration>
            </plugin>

            <!-- Maven Surefire Plugin for tests -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>3.1.2</version>
            </plugin>
        </plugins>
    </build>
</project>







public class App {
    public static void main(String[] args) {
        System.out.println("Hello from Linux! Application running successfully!");
        System.out.println("तुमचा Java application आता काम करेल!");
    }
}


docker pull nginx:trixie-perl

github_pat_11BVRDUAY0VvcmZq0177qK_ DrPiJITxloOJZrK5ceaQbu15ZbBpNESk2TxT4SWOFvtZTIULSHLv46yClqE





pipeline {
    agent any

    stages {

        stage('Git Checkout') {
            steps {
                checkout scmGit(
                    branches: [[name: '*/main']],
                    userRemoteConfigs: [[url: 'https://github.com/sarangdayalwar21/microservice-jenkins-may24.git']]
                )
            }
        }

        stage('Install Dependencies') {
            steps {
                dir('cart-microservice-nodejs') {
                    sh 'npm install'
                }
            }
        }

        stage('Docker Build') {
            steps {
                dir('cart-microservice-nodejs') {
                    sh 'docker build -t node-app .'
                }
            }
        }

        stage('Docker Push') {
            steps {
                withCredentials([string(credentialsId: 'dockerhub-pass', variable: 'DOCKER_PASS')]) {
                    sh 'docker login -u sarang8390 -p ${DOCKER_PASS}'
                    sh 'docker tag node-app sarang8390/node-app:latest'
                    sh 'docker push sarang8390/node-app:latest'
                    sh 'docker logout'
                }
            }
        }

        stage('Approval') {
            steps {
                input message: 'Deploy to production?'
            }
        }

        stage('Deployment') {
            steps {
                sh 'docker run -d -p 3000:3000 sarang8390/node-app:latest'
            }
        }
    }

    post {
        failure {
            echo "Pipeline failed!"
        }
    }
}

